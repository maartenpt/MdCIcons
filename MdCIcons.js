var MdCIcons = (function () {

	lineheight = 24; spacing = 2;
	// svgbase = "https://quest.ms.mff.cuni.cz/teitok-dev/teitok/jsesh/gards/";
	svgbase = "https://raw.githubusercontent.com/rosmord/JavaScriptSesh/master/images/glyphs/";
    mdcclass = "token-glyphs";
    mdcatt = "title";
	textheight = 94;
	debug = false;
    useunicode = true;
    csslink = "";
    
	gardlist = {}; pushed = {};
	elmlist = [];
	toloads = {};
	svgsrc = document.createElement('div');
	svgsrc.setAttribute("id", "svgsrc");
	svgsrc.style.opacity = 0;
	gnrcnt = 1;
 
 	phon2gard = { "mSa": "A12", "xr": "A15", "Xrd": "A17", "sr": "A21", "mniw": "A33", "qiz": "A38", "iry": "A47", "Sps": "A50", "Spsi": "A51", "x": "J1", "mAa": "J11", "gs": "J13", "im": "J13", "M": "J15", "sA": "J17", "apr": "J20", "wDa": "J21", "nD": "J27", "qd": "J28", "Xkr": "J30", "Hp": "J5", "qn": "J8", "msi": "B3", "mAat": "C10", "HH": "C11", "DHwty": "C3", "Xnmw": "C4", "inpw": "C6", "stX": "C7", "mnw": "C8", "tp": "D1", "wDAt": "D10", "R": "D153", "fnD": "D19", "Hr": "D2", "r": "D21", "rA": "D21", "spt": "D24", "spty": "D25", "mnD": "D27", "kA": "D28", "Sny": "D3", "aHA": "D34", "a": "D36", "ir": "D4", "Dsr": "D45", "d": "D46", "Dba": "D50", "mt": "D52", "gH": "D56", "gHs": "D56", "rd": "D56", "sbq": "D56", "b": "D58", "ab": "D59", "wab": "D60", "sAH": "D61", "rmi": "D9", "zAb": "E17", "mAi": "E22", "l": "E23", "rw": "E23", "Aby": "E24", "wn": "E34", "zzmt": "E6", "wsr": "F12", "wp": "F13", "db": "F16", "Hw": "F18", "bH": "F18", "ns": "F20", "DrD": "F21", "idn": "F21", "msDr": "F21", "sDm": "F21", "kfA": "F22", "pH": "F22", "xpS": "F23", "wHm": "F25", "Xn": "F26", "sti": "F29", "Sd": "F30", "ms": "F31", "X": "F32", "sd": "F33", "ib": "F34", "nfr": "F35", "zmA": "F36", "imAx": "F39", "HAt": "F4", "Aw": "F40", "spr": "F42", "isw": "F44", "iwa": "F44", "pXr": "F46", "qAb": "F46", "SsA": "F5", "A": "G1", "mwt": "G14", "nbty": "G16", "m": "G17", "mm": "G18", "AA": "G2", "nH": "G21", "Db": "G22", "rxyt": "G23", "Ax": "G25", "dSr": "G27", "gm": "G28", "bA": "G29", "baHi": "G32", "aq": "G35", "wr": "G36", "nDs": "G37", "gb": "G38", "zA": "G39", "tyw": "G4", "pA": "G40", "xn": "G41", "wSA": "G42", "w": "G43", "ww": "G44", "mAw": "G46", "TA": "G47", "snD": "G54", "pq": "H2", "wSm": "H2", "pAq": "H3", "nr": "H4", "Sw": "H6", "aSA": "I1", "D": "I10", "DD": "I11", "Styw": "I2", "mzH": "I3", "sbk": "I4", "sAq": "I5", "km": "I6", "Hfn": "I8", "f": "I9", "in": "K1", "ad": "K3", "XA": "K4", "bz": "K5", "nSmt": "K6", "xpr": "L1", "bit": "L2", "srqt": "L7", "iAm": "M1", "wdn": "M11", "xA": "M12", "1000": "M12", "wAD": "M13", "HA": "M16", "i": "M17", "ii": "M18", "Hn": "M2", "sxt": "M20", "sm": "M21", "nn": "M22A", "sw": "M23", "rsw": "M24", "Sma": "M26", "nDm": "M29", "xt": "M3", "bnr": "M30", "bdt": "M34", "Dr": "M36", "rnp": "M4", "iz": "M40", "tr": "M6", "SA": "M8", "zSn": "M9", "pt": "N1", "Abd": "N11", "iaH": "N11", "dwA": "N14", "sbA": "N14", "dwAt": "N15", "tA": "N16", "iw": "N18", "wDb": "N20", "spAt": "N24", "xAst": "N25", "Dw": "N26", "Axt": "N27", "xa": "N28", "q": "N29", "iAt": "N30", "n": "N35", "mw": "N35A", "S": "N37", "iAdt": "N4", "idt": "N4", "Sm": "N40", "id": "N41", "hrw": "N5", "ra": "N5", "zw": "N5", "Hnmmt": "N8", "pzD": "N9", "pr": "O1", "aH": "O11", "wsxt": "O15", "kAr": "O18", "zH": "O22", "txn": "O25", "iwn": "O28", "aA": "O29", "zxnt": "O30", "z": "O34", "zb": "O35", "inb": "O36", "qnbt": "O38A", "h": "O4", "Szp": "O42", "ipt": "O45", "nxn": "O47", "niwt": "O49", "zp": "O50", "Snwt": "O51", "Hwt": "O6", "wHa": "P4", "TAw": "P5", "nfw": "P5", "aHa": "P6", "xrw": "P8", "st": "Q1", "wz": "Q2", "p": "Q3", "qrsw": "Q6", "xAt": "R1", "xAwt": "R1", "Dd": "R11", "dd": "R11", "imnt": "R14", "iAb": "R15", "wx": "R16", "xm": "R22", "Htp": "R4", "kAp": "R5", "kp": "R5", "snTr": "R7", "nTr": "R8", "nTrw": "R8A", "bd": "R9", "HDt": "S1", "mDH": "S10", "wsx": "S11", "nbw": "S12", "THn": "S15", "tHn": "S15", "mnit": "S18", "sDAw": "S19", "xtm": "S20", "sT": "S22", "dmD": "S23", "Tz": "S24", "Sndyt": "S26", "mnxt": "S27", "s": "S29", "N": "S3", "dSrt": "S3", "sf": "S30", "siA": "S32", "Tb": "S33", "anx": "S34", "Swt": "S35", "xw": "S37", "HqA": "S38", "awt": "S39", "wAs": "S40", "Dam": "S41", "abA": "S42", "sxm": "S42", "xrp": "S42", "md": "S43", "Ams": "S44", "nxxw": "S45", "K": "S56", "sxmty": "S6", "xprS": "S7", "Atf": "S8", "Swty": "S9", "pD": "T10", "sXr": "T11", "zin": "T11", "zwn": "T11", "Ai": "T12", "Ar": "T12", "rwD": "T12", "rwd": "T12", "rs": "T13", "qmA": "T14", "wrrt": "T17", "Sms": "T18", "qs": "T19", "wa": "T21", "sn": "T22", "iH": "T24", "DbA": "T25", "Xr": "T28", "nmt": "T29", "HD": "T3", "sSm": "T31", "nm": "T34", "HDD": "T6", "pd": "T9", "mA": "U1", "it": "U10", "HqAt": "U11", "Sna": "U13", "hb": "U13", "tm": "U15", "biA": "U16", "grg": "U17", "stp": "U21", "mnx": "U22", "Ab": "U23", "Hmt": "U24", "wbA": "U26", "DA": "U28", "rtH": "U31", "zmn": "U32", "ti": "U33", "xsf": "U34", "Hm": "U36", "mxAt": "U38", "mr": "U6", "100": "V1", "arq": "V12", "T": "V13", "iTi": "V15", "TmA": "V19", "XAr": "V19", "mDt": "V19", "sTA": "V2", "10": "V20", "mD": "V20", "mH": "V22", "wD": "V24", "aD": "V26", "H": "V28", "sk": "V29", "wAH": "V29", "sTAw": "V3", "nb": "V30", "k": "V31", "msn": "V32", "sSr": "V33", "idr": "V37", "wA": "V4", "snT": "V5", "sS": "V6", "Sn": "V7", "iab": "W10", "g": "W11", "nzt": "W11", "Hz": "W14", "xnt": "W17", "mi": "W19", "bAs": "W2", "Hnqt": "W22", "nw": "W24", "ini": "W25", "Hb": "W3", "Xnm": "W9", "t": "X1", "di": "X8", "rdi": "X8", "mDAt": "Y1", "mnhd": "Y3", "zS": "Y3", "mn": "Y5", "ibA": "Y6", "zSSt": "Y8", "imi": "Z11", "y": "Z4", "W": "Z7" };
	gard2unicode = { "A1": "ğ“€€", "A2": "ğ“€", "A3": "ğ“€‚", "A4": "ğ“€ƒ", "A5": "ğ“€„", "A5A": "ğ“€…", "A6": "ğ“€†", "A6A": "ğ“€‡", "A6B": "ğ“€ˆ", "A7": "ğ“€‰", "A8": "ğ“€Š", "A9": "ğ“€‹", "A10": "ğ“€Œ", "A11": "ğ“€", "A12": "ğ“€", "A13": "ğ“€", "A14": "ğ“€", "A14A": "ğ“€‘", "A15": "ğ“€’", "A16": "ğ“€“", "A17": "ğ“€”", "A17A": "ğ“€•", "A18": "ğ“€–", "A19": "ğ“€—", "A20": "ğ“€˜", "A21": "ğ“€™", "A22": "ğ“€š", "A23": "ğ“€›", "A24": "ğ“€œ", "A25": "ğ“€", "A26": "ğ“€", "A27": "ğ“€Ÿ", "A28": "ğ“€ ", "A29": "ğ“€¡", "A30": "ğ“€¢", "A31": "ğ“€£", "A32": "ğ“€¤", "A32A": "ğ“€¥", "A33": "ğ“€¦", "A34": "ğ“€§", "A35": "ğ“€¨", "A36": "ğ“€©", "A37": "ğ“€ª", "A38": "ğ“€«", "A39": "ğ“€¬", "A40": "ğ“€­", "A40A": "ğ“€®", "A41": "ğ“€¯", "A42": "ğ“€°", "A42A": "ğ“€±", "A43": "ğ“€²", "A43A": "ğ“€³", "A44": "ğ“€´", "A45": "ğ“€µ", "A45A": "ğ“€¶", "A46": "ğ“€·", "A47": "ğ“€¸", "A48": "ğ“€¹", "A49": "ğ“€º", "A50": "ğ“€»", "A51": "ğ“€¼", "A52": "ğ“€½", "A53": "ğ“€¾", "A54": "ğ“€¿", "A55": "ğ“€", "A56": "ğ“", "A57": "ğ“‚", "A58": "ğ“ƒ", "A59": "ğ“„", "A60": "ğ“…", "A61": "ğ“†", "A62": "ğ“‡", "A63": "ğ“ˆ", "A64": "ğ“‰", "A65": "ğ“Š", "A66": "ğ“‹", "A67": "ğ“Œ", "A68": "ğ“", "A69": "ğ“", "A70": "ğ“", "B1": "ğ“", "B2": "ğ“‘", "B3": "ğ“’", "B4": "ğ““", "B5": "ğ“”", "B5A": "ğ“•", "B6": "ğ“–", "B7": "ğ“—", "B8": "ğ“˜", "B9": "ğ“™", "C1": "ğ“š", "C2": "ğ“›", "C2A": "ğ“œ", "C2B": "ğ“", "C2C": "ğ“", "C3": "ğ“Ÿ", "C4": "ğ“ ", "C5": "ğ“¡", "C6": "ğ“¢", "C7": "ğ“£", "C8": "ğ“¤", "C9": "ğ“¥", "C10": "ğ“¦", "C10A": "ğ“§", "C11": "ğ“¨", "C12": "ğ“©", "C13": "ğ“ª", "C14": "ğ“«", "C15": "ğ“¬", "C16": "ğ“­", "C17": "ğ“®", "C18": "ğ“¯", "C19": "ğ“°", "C20": "ğ“±", "C21": "ğ“²", "C22": "ğ“³", "C23": "ğ“´", "C24": "ğ“µ", "D1": "ğ“¶", "D2": "ğ“·", "D3": "ğ“¸", "D4": "ğ“¹", "D5": "ğ“º", "D6": "ğ“»", "D7": "ğ“¼", "D8": "ğ“½", "D8A": "ğ“¾", "D9": "ğ“¿", "D10": "ğ“‚€", "D11": "ğ“‚", "D12": "ğ“‚‚", "D13": "ğ“‚ƒ", "D14": "ğ“‚„", "D15": "ğ“‚…", "D16": "ğ“‚†", "D17": "ğ“‚‡", "D18": "ğ“‚ˆ", "D19": "ğ“‚‰", "D20": "ğ“‚Š", "D21": "ğ“‚‹", "D22": "ğ“‚Œ", "D23": "ğ“‚", "D24": "ğ“‚", "D25": "ğ“‚", "D26": "ğ“‚", "D27": "ğ“‚‘", "D27A": "ğ“‚’", "D28": "ğ“‚“", "D29": "ğ“‚”", "D30": "ğ“‚•", "D31": "ğ“‚–", "D31A": "ğ“‚—", "D32": "ğ“‚˜", "D33": "ğ“‚™", "D34": "ğ“‚š", "D34A": "ğ“‚›", "D35": "ğ“‚œ", "D36": "ğ“‚", "D37": "ğ“‚", "D38": "ğ“‚Ÿ", "D39": "ğ“‚ ", "D40": "ğ“‚¡", "D41": "ğ“‚¢", "D42": "ğ“‚£", "D43": "ğ“‚¤", "D44": "ğ“‚¥", "D45": "ğ“‚¦", "D46": "ğ“‚§", "D46A": "ğ“‚¨", "D47": "ğ“‚©", "D48": "ğ“‚ª", "D48A": "ğ“‚«", "D49": "ğ“‚¬", "D50": "ğ“‚­", "D50A": "ğ“‚®", "D50B": "ğ“‚¯", "D50C": "ğ“‚°", "D50D": "ğ“‚±", "D50E": "ğ“‚²", "D50F": "ğ“‚³", "D50G": "ğ“‚´", "D50H": "ğ“‚µ", "D50I": "ğ“‚¶", "D51": "ğ“‚·", "D52": "ğ“‚¸", "D52A": "ğ“‚¹", "D53": "ğ“‚º", "D54": "ğ“‚»", "D54A": "ğ“‚¼", "D55": "ğ“‚½", "D56": "ğ“‚¾", "D57": "ğ“‚¿", "D58": "ğ“ƒ€", "D59": "ğ“ƒ", "D60": "ğ“ƒ‚", "D61": "ğ“ƒƒ", "D62": "ğ“ƒ„", "D63": "ğ“ƒ…", "D64": "ğ“ƒ†", "D65": "ğ“ƒ‡", "D66": "ğ“ƒˆ", "D67": "ğ“ƒ‰", "D67A": "ğ“ƒŠ", "D67B": "ğ“ƒ‹", "D67C": "ğ“ƒŒ", "D67D": "ğ“ƒ", "D67E": "ğ“ƒ", "D67F": "ğ“ƒ", "D67G": "ğ“ƒ", "D67H": "ğ“ƒ‘", "E1": "ğ“ƒ’", "E2": "ğ“ƒ“", "E3": "ğ“ƒ”", "E4": "ğ“ƒ•", "E5": "ğ“ƒ–", "E6": "ğ“ƒ—", "E7": "ğ“ƒ˜", "E8": "ğ“ƒ™", "E8A": "ğ“ƒš", "E9": "ğ“ƒ›", "E9A": "ğ“ƒœ", "E10": "ğ“ƒ", "E11": "ğ“ƒ", "E12": "ğ“ƒŸ", "E13": "ğ“ƒ ", "E14": "ğ“ƒ¡", "E15": "ğ“ƒ¢", "E16": "ğ“ƒ£", "E16A": "ğ“ƒ¤", "E17": "ğ“ƒ¥", "E17A": "ğ“ƒ¦", "E18": "ğ“ƒ§", "E19": "ğ“ƒ¨", "E20": "ğ“ƒ©", "E20A": "ğ“ƒª", "E21": "ğ“ƒ«", "E22": "ğ“ƒ¬", "E23": "ğ“ƒ­", "E24": "ğ“ƒ®", "E25": "ğ“ƒ¯", "E26": "ğ“ƒ°", "E27": "ğ“ƒ±", "E28": "ğ“ƒ²", "E28A": "ğ“ƒ³", "E29": "ğ“ƒ´", "E30": "ğ“ƒµ", "E31": "ğ“ƒ¶", "E32": "ğ“ƒ·", "E33": "ğ“ƒ¸", "E34": "ğ“ƒ¹", "E34A": "ğ“ƒº", "E36": "ğ“ƒ»", "E37": "ğ“ƒ¼", "E38": "ğ“ƒ½", "F1": "ğ“ƒ¾", "F1A": "ğ“ƒ¿", "F2": "ğ“„€", "F3": "ğ“„", "F4": "ğ“„‚", "F5": "ğ“„ƒ", "F6": "ğ“„„", "F7": "ğ“„…", "F8": "ğ“„†", "F9": "ğ“„‡", "F10": "ğ“„ˆ", "F11": "ğ“„‰", "F12": "ğ“„Š", "F13": "ğ“„‹", "F13A": "ğ“„Œ", "F14": "ğ“„", "F15": "ğ“„", "F16": "ğ“„", "F17": "ğ“„", "F18": "ğ“„‘", "F19": "ğ“„’", "F20": "ğ“„“", "F21": "ğ“„”", "F21A": "ğ“„•", "F22": "ğ“„–", "F23": "ğ“„—", "F24": "ğ“„˜", "F25": "ğ“„™", "F26": "ğ“„š", "F27": "ğ“„›", "F28": "ğ“„œ", "F29": "ğ“„", "F30": "ğ“„", "F31": "ğ“„Ÿ", "F31A": "ğ“„ ", "F32": "ğ“„¡", "F33": "ğ“„¢", "F34": "ğ“„£", "F35": "ğ“„¤", "F36": "ğ“„¥", "F37": "ğ“„¦", "F37A": "ğ“„§", "F38": "ğ“„¨", "F38A": "ğ“„©", "F39": "ğ“„ª", "F40": "ğ“„«", "F41": "ğ“„¬", "F42": "ğ“„­", "F43": "ğ“„®", "F44": "ğ“„¯", "F45": "ğ“„°", "F45A": "ğ“„±", "F46": "ğ“„²", "F46A": "ğ“„³", "F47": "ğ“„´", "F47A": "ğ“„µ", "F48": "ğ“„¶", "F49": "ğ“„·", "F50": "ğ“„¸", "F51": "ğ“„¹", "F51A": "ğ“„º", "F51B": "ğ“„»", "F51C": "ğ“„¼", "F52": "ğ“„½", "F53": "ğ“„¾", "G1": "ğ“„¿", "G2": "ğ“…€", "G3": "ğ“…", "G4": "ğ“…‚", "G5": "ğ“…ƒ", "G6": "ğ“…„", "G6A": "ğ“……", "G7": "ğ“…†", "G7A": "ğ“…‡", "G7B": "ğ“…ˆ", "G8": "ğ“…‰", "G9": "ğ“…Š", "G10": "ğ“…‹", "G11": "ğ“…Œ", "G11A": "ğ“…", "G12": "ğ“…", "G13": "ğ“…", "G14": "ğ“…", "G15": "ğ“…‘", "G16": "ğ“…’", "G17": "ğ“…“", "G18": "ğ“…”", "G19": "ğ“…•", "G20": "ğ“…–", "G20A": "ğ“…—", "G21": "ğ“…˜", "G22": "ğ“…™", "G23": "ğ“…š", "G24": "ğ“…›", "G25": "ğ“…œ", "G26": "ğ“…", "G26A": "ğ“…", "G27": "ğ“…Ÿ", "G28": "ğ“… ", "G29": "ğ“…¡", "G30": "ğ“…¢", "G31": "ğ“…£", "G32": "ğ“…¤", "G33": "ğ“…¥", "G34": "ğ“…¦", "G35": "ğ“…§", "G36": "ğ“…¨", "G36A": "ğ“…©", "G37": "ğ“…ª", "G37A": "ğ“…«", "G38": "ğ“…¬", "G39": "ğ“…­", "G40": "ğ“…®", "G41": "ğ“…¯", "G42": "ğ“…°", "G43": "ğ“…±", "G43A": "ğ“…²", "G44": "ğ“…³", "G45": "ğ“…´", "G45A": "ğ“…µ", "G46": "ğ“…¶", "G47": "ğ“…·", "G48": "ğ“…¸", "G49": "ğ“…¹", "G50": "ğ“…º", "G51": "ğ“…»", "G52": "ğ“…¼", "G53": "ğ“…½", "G54": "ğ“…¾", "H1": "ğ“…¿", "H2": "ğ“†€", "H3": "ğ“†", "H4": "ğ“†‚", "H5": "ğ“†ƒ", "H6": "ğ“†„", "H6A": "ğ“†…", "H7": "ğ“††", "H8": "ğ“†‡", "I1": "ğ“†ˆ", "I2": "ğ“†‰", "I3": "ğ“†Š", "I4": "ğ“†‹", "I5": "ğ“†Œ", "I5A": "ğ“†", "I6": "ğ“†", "I7": "ğ“†", "I8": "ğ“†", "I9": "ğ“†‘", "I9A": "ğ“†’", "I10": "ğ“†“", "I10A": "ğ“†”", "I11": "ğ“†•", "I11A": "ğ“†–", "I12": "ğ“†—", "I13": "ğ“†˜", "I14": "ğ“†™", "I15": "ğ“†š", "K1": "ğ“†›", "K2": "ğ“†œ", "K3": "ğ“†", "K4": "ğ“†", "K5": "ğ“†Ÿ", "K6": "ğ“† ", "K7": "ğ“†¡", "K8": "ğ“†¢", "L1": "ğ“†£", "L2": "ğ“†¤", "L2A": "ğ“†¥", "L3": "ğ“†¦", "L4": "ğ“†§", "L5": "ğ“†¨", "L6": "ğ“†©", "L6A": "ğ“†ª", "L7": "ğ“†«", "L8": "ğ“†¬", "M1": "ğ“†­", "M1A": "ğ“†®", "M1B": "ğ“†¯", "M2": "ğ“†°", "M3": "ğ“†±", "M3A": "ğ“†²", "M4": "ğ“†³", "M5": "ğ“†´", "M6": "ğ“†µ", "M7": "ğ“†¶", "M8": "ğ“†·", "M9": "ğ“†¸", "M10": "ğ“†¹", "M10A": "ğ“†º", "M11": "ğ“†»", "M12": "ğ“†¼", "M12A": "ğ“†½", "M12B": "ğ“†¾", "M12C": "ğ“†¿", "M12D": "ğ“‡€", "M12E": "ğ“‡", "M12F": "ğ“‡‚", "M12G": "ğ“‡ƒ", "M12H": "ğ“‡„", "M13": "ğ“‡…", "M14": "ğ“‡†", "M15": "ğ“‡‡", "M15A": "ğ“‡ˆ", "M16": "ğ“‡‰", "M16A": "ğ“‡Š", "M17": "ğ“‡‹", "M17A": "ğ“‡Œ", "M18": "ğ“‡", "M19": "ğ“‡", "M20": "ğ“‡", "M21": "ğ“‡", "M22": "ğ“‡‘", "M22A": "ğ“‡’", "M23": "ğ“‡“", "M24": "ğ“‡”", "M24A": "ğ“‡•", "M25": "ğ“‡–", "M26": "ğ“‡—", "M27": "ğ“‡˜", "M28": "ğ“‡™", "M28A": "ğ“‡š", "M29": "ğ“‡›", "M30": "ğ“‡œ", "M31": "ğ“‡", "M31A": "ğ“‡", "M32": "ğ“‡Ÿ", "M33": "ğ“‡ ", "M33A": "ğ“‡¡", "M33B": "ğ“‡¢", "M34": "ğ“‡£", "M35": "ğ“‡¤", "M36": "ğ“‡¥", "M37": "ğ“‡¦", "M38": "ğ“‡§", "M39": "ğ“‡¨", "M40": "ğ“‡©", "M40A": "ğ“‡ª", "M41": "ğ“‡«", "M42": "ğ“‡¬", "M43": "ğ“‡­", "M44": "ğ“‡®", "N1": "ğ“‡¯", "N2": "ğ“‡°", "N3": "ğ“‡±", "N4": "ğ“‡²", "N5": "ğ“‡³", "N6": "ğ“‡´", "N7": "ğ“‡µ", "N8": "ğ“‡¶", "N9": "ğ“‡·", "N10": "ğ“‡¸", "N11": "ğ“‡¹", "N12": "ğ“‡º", "N13": "ğ“‡»", "N14": "ğ“‡¼", "N15": "ğ“‡½", "N16": "ğ“‡¾", "N17": "ğ“‡¿", "N18": "ğ“ˆ€", "N18A": "ğ“ˆ", "N18B": "ğ“ˆ‚", "N19": "ğ“ˆƒ", "N20": "ğ“ˆ„", "N21": "ğ“ˆ…", "N22": "ğ“ˆ†", "N23": "ğ“ˆ‡", "N24": "ğ“ˆˆ", "N25": "ğ“ˆ‰", "N25A": "ğ“ˆŠ", "N26": "ğ“ˆ‹", "N27": "ğ“ˆŒ", "N28": "ğ“ˆ", "N29": "ğ“ˆ", "N30": "ğ“ˆ", "N31": "ğ“ˆ", "N32": "ğ“ˆ‘", "N33": "ğ“ˆ’", "N33A": "ğ“ˆ“", "N34": "ğ“ˆ”", "N34A": "ğ“ˆ•", "N35": "ğ“ˆ–", "N35A": "ğ“ˆ—", "N36": "ğ“ˆ˜", "N37": "ğ“ˆ™", "N37A": "ğ“ˆš", "N38": "ğ“ˆ›", "N39": "ğ“ˆœ", "N40": "ğ“ˆ", "N41": "ğ“ˆ", "N42": "ğ“ˆŸ", "NL5a": "ğ“ˆ¥", "NL18": "ğ“ˆ³", "O1": "ğ“‰", "O2": "ğ“‰’", "O3": "ğ“‰“", "O4": "ğ“‰”", "O5": "ğ“‰•", "O5A": "ğ“‰–", "O6": "ğ“‰—", "O6A": "ğ“‰˜", "O6B": "ğ“‰™", "O6C": "ğ“‰š", "O6D": "ğ“‰›", "O6E": "ğ“‰œ", "O6F": "ğ“‰", "O7": "ğ“‰", "O8": "ğ“‰Ÿ", "O9": "ğ“‰ ", "O10": "ğ“‰¡", "O10A": "ğ“‰¢", "O10B": "ğ“‰£", "O10C": "ğ“‰¤", "O11": "ğ“‰¥", "O12": "ğ“‰¦", "O13": "ğ“‰§", "O14": "ğ“‰¨", "O15": "ğ“‰©", "O16": "ğ“‰ª", "O17": "ğ“‰«", "O18": "ğ“‰¬", "O19": "ğ“‰­", "O19A": "ğ“‰®", "O20": "ğ“‰¯", "O20A": "ğ“‰°", "O21": "ğ“‰±", "O22": "ğ“‰²", "O23": "ğ“‰³", "O24": "ğ“‰´", "O24A": "ğ“‰µ", "O25": "ğ“‰¶", "O25A": "ğ“‰·", "O26": "ğ“‰¸", "O27": "ğ“‰¹", "O28": "ğ“‰º", "O29": "ğ“‰»", "O29A": "ğ“‰¼", "O30": "ğ“‰½", "O30A": "ğ“‰¾", "O31": "ğ“‰¿", "O32": "ğ“Š€", "O33": "ğ“Š", "O33A": "ğ“Š‚", "O34": "ğ“Šƒ", "O35": "ğ“Š„", "O36": "ğ“Š…", "O36A": "ğ“Š†", "O36B": "ğ“Š‡", "O36C": "ğ“Šˆ", "O36D": "ğ“Š‰", "O37": "ğ“ŠŠ", "O38": "ğ“Š‹", "O39": "ğ“ŠŒ", "O40": "ğ“Š", "O41": "ğ“Š", "O42": "ğ“Š", "O43": "ğ“Š", "O44": "ğ“Š‘", "O45": "ğ“Š’", "O46": "ğ“Š“", "O47": "ğ“Š”", "O48": "ğ“Š•", "O49": "ğ“Š–", "O50": "ğ“Š—", "O50A": "ğ“Š˜", "O50B": "ğ“Š™", "O51": "ğ“Šš", "P1": "ğ“Š›", "P1A": "ğ“Šœ", "P2": "ğ“Š", "P3": "ğ“Š", "P3A": "ğ“ŠŸ", "P4": "ğ“Š ", "P5": "ğ“Š¡", "P6": "ğ“Š¢", "P7": "ğ“Š£", "P8": "ğ“Š¤", "P9": "ğ“Š¥", "P10": "ğ“Š¦", "P11": "ğ“Š§", "Q1": "ğ“Š¨", "Q2": "ğ“Š©", "Q3": "ğ“Šª", "Q4": "ğ“Š«", "Q5": "ğ“Š¬", "Q6": "ğ“Š­", "Q7": "ğ“Š®", "R1": "ğ“Š¯", "R2": "ğ“Š°", "R2A": "ğ“Š±", "R3": "ğ“Š²", "R3A": "ğ“Š³", "R3B": "ğ“Š´", "R4": "ğ“Šµ", "R5": "ğ“Š¶", "R6": "ğ“Š·", "R7": "ğ“Š¸", "R8": "ğ“Š¹", "R9": "ğ“Šº", "R10": "ğ“Š»", "R10A": "ğ“Š¼", "R11": "ğ“Š½", "R12": "ğ“Š¾", "R13": "ğ“Š¿", "R14": "ğ“‹€", "R15": "ğ“‹", "R16": "ğ“‹‚", "R16A": "ğ“‹ƒ", "R17": "ğ“‹„", "R18": "ğ“‹…", "R19": "ğ“‹†", "R20": "ğ“‹‡", "R21": "ğ“‹ˆ", "R22": "ğ“‹‰", "R23": "ğ“‹Š", "R24": "ğ“‹‹", "R25": "ğ“‹Œ", "R26": "ğ“‹", "R27": "ğ“‹", "R28": "ğ“‹", "R29": "ğ“‹", "S1": "ğ“‹‘", "S2": "ğ“‹’", "S2A": "ğ“‹“", "S3": "ğ“‹”", "S4": "ğ“‹•", "S5": "ğ“‹–", "S6": "ğ“‹—", "S6A": "ğ“‹˜", "S7": "ğ“‹™", "S8": "ğ“‹š", "S9": "ğ“‹›", "S10": "ğ“‹œ", "S11": "ğ“‹", "S12": "ğ“‹", "S13": "ğ“‹Ÿ", "S14": "ğ“‹ ", "S14A": "ğ“‹¡", "S14B": "ğ“‹¢", "S15": "ğ“‹£", "S16": "ğ“‹¤", "S17": "ğ“‹¥", "S17A": "ğ“‹¦", "S18": "ğ“‹§", "S19": "ğ“‹¨", "S20": "ğ“‹©", "S21": "ğ“‹ª", "S22": "ğ“‹«", "S23": "ğ“‹¬", "S24": "ğ“‹­", "S25": "ğ“‹®", "S26": "ğ“‹¯", "S26A": "ğ“‹°", "S26B": "ğ“‹±", "S27": "ğ“‹²", "S28": "ğ“‹³", "S29": "ğ“‹´", "S30": "ğ“‹µ", "S31": "ğ“‹¶", "S32": "ğ“‹·", "S33": "ğ“‹¸", "S34": "ğ“‹¹", "S35": "ğ“‹º", "S35A": "ğ“‹»", "S36": "ğ“‹¼", "S37": "ğ“‹½", "S38": "ğ“‹¾", "S39": "ğ“‹¿", "S40": "ğ“Œ€", "S41": "ğ“Œ", "S42": "ğ“Œ‚", "S43": "ğ“Œƒ", "S44": "ğ“Œ„", "S45": "ğ“Œ…", "S46": "ğ“Œ†", "T1": "ğ“Œ‡", "T2": "ğ“Œˆ", "T3": "ğ“Œ‰", "T3A": "ğ“ŒŠ", "T4": "ğ“Œ‹", "T5": "ğ“ŒŒ", "T6": "ğ“Œ", "T7": "ğ“Œ", "T7A": "ğ“Œ", "T8": "ğ“Œ", "T8A": "ğ“Œ‘", "T9": "ğ“Œ’", "T9A": "ğ“Œ“", "T10": "ğ“Œ”", "T11": "ğ“Œ•", "T11A": "ğ“Œ–", "T12": "ğ“Œ—", "T13": "ğ“Œ˜", "T14": "ğ“Œ™", "T15": "ğ“Œš", "T16": "ğ“Œ›", "T16A": "ğ“Œœ", "T17": "ğ“Œ", "T18": "ğ“Œ", "T19": "ğ“ŒŸ", "T20": "ğ“Œ ", "T21": "ğ“Œ¡", "T22": "ğ“Œ¢", "T23": "ğ“Œ£", "T24": "ğ“Œ¤", "T25": "ğ“Œ¥", "T26": "ğ“Œ¦", "T27": "ğ“Œ§", "T28": "ğ“Œ¨", "T29": "ğ“Œ©", "T30": "ğ“Œª", "T31": "ğ“Œ«", "T32": "ğ“Œ¬", "T32A": "ğ“Œ­", "T33": "ğ“Œ®", "T33A": "ğ“Œ¯", "T34": "ğ“Œ°", "T35": "ğ“Œ±", "T36": "ğ“Œ²", "U1": "ğ“Œ³", "U2": "ğ“Œ´", "U3": "ğ“Œµ", "U4": "ğ“Œ¶", "U5": "ğ“Œ·", "U6": "ğ“Œ¸", "U6A": "ğ“Œ¹", "U6B": "ğ“Œº", "U7": "ğ“Œ»", "U8": "ğ“Œ¼", "U9": "ğ“Œ½", "U10": "ğ“Œ¾", "U11": "ğ“Œ¿", "U12": "ğ“€", "U13": "ğ“", "U14": "ğ“‚", "U15": "ğ“ƒ", "U16": "ğ“„", "U17": "ğ“…", "U18": "ğ“†", "U19": "ğ“‡", "U20": "ğ“ˆ", "U21": "ğ“‰", "U22": "ğ“Š", "U23": "ğ“‹", "U23A": "ğ“Œ", "U24": "ğ“", "U25": "ğ“", "U26": "ğ“", "U27": "ğ“", "U28": "ğ“‘", "U29": "ğ“’", "U29A": "ğ““", "U30": "ğ“”", "U31": "ğ“•", "U32": "ğ“–", "U32A": "ğ“—", "U33": "ğ“˜", "U34": "ğ“™", "U35": "ğ“š", "U36": "ğ“›", "U37": "ğ“œ", "U38": "ğ“", "U39": "ğ“", "U40": "ğ“Ÿ", "U41": "ğ“ ", "U42": "ğ“¡", "V1": "ğ“¢", "V1A": "ğ“£", "V1B": "ğ“¤", "V1C": "ğ“¥", "V1D": "ğ“¦", "V1E": "ğ“§", "V1F": "ğ“¨", "V1G": "ğ“©", "V1H": "ğ“ª", "V1I": "ğ“«", "V2": "ğ“¬", "V2A": "ğ“­", "V3": "ğ“®", "V4": "ğ“¯", "V5": "ğ“°", "V6": "ğ“±", "V7": "ğ“²", "V7A": "ğ“³", "V7B": "ğ“´", "V8": "ğ“µ", "V9": "ğ“¶", "V10": "ğ“·", "V11": "ğ“¸", "V11A": "ğ“¹", "V11B": "ğ“º", "V11C": "ğ“»", "V12": "ğ“¼", "V12A": "ğ“½", "V12B": "ğ“¾", "V13": "ğ“¿", "V14": "ğ“€", "V15": "ğ“", "V16": "ğ“‚", "V17": "ğ“ƒ", "V18": "ğ“„", "V19": "ğ“…", "V20": "ğ“†", "V20A": "ğ“‡", "V20B": "ğ“ˆ", "V20C": "ğ“‰", "V20D": "ğ“Š", "V20E": "ğ“‹", "V20F": "ğ“Œ", "V20G": "ğ“", "V20H": "ğ“", "V20I": "ğ“", "V20J": "ğ“", "V20K": "ğ“‘", "V20L": "ğ“’", "V21": "ğ““", "V22": "ğ“”", "V23": "ğ“•", "V23A": "ğ“–", "V24": "ğ“—", "V25": "ğ“˜", "V26": "ğ“™", "V27": "ğ“š", "V28": "ğ“›", "V28A": "ğ“œ", "V29": "ğ“", "V29A": "ğ“", "V30": "ğ“Ÿ", "V30A": "ğ“ ", "V31": "ğ“¡", "V31A": "ğ“¢", "V32": "ğ“£", "V33": "ğ“¤", "V33A": "ğ“¥", "V34": "ğ“¦", "V35": "ğ“§", "V36": "ğ“¨", "V37": "ğ“©", "V37A": "ğ“ª", "V38": "ğ“«", "V39": "ğ“¬", "V40": "ğ“­", "V40A": "ğ“®", "W1": "ğ“¯", "W2": "ğ“°", "W3": "ğ“±", "W3A": "ğ“²", "W4": "ğ“³", "W5": "ğ“´", "W6": "ğ“µ", "W7": "ğ“¶", "W8": "ğ“·", "W9": "ğ“¸", "W9A": "ğ“¹", "W10": "ğ“º", "W10A": "ğ“»", "W11": "ğ“¼", "W12": "ğ“½", "W13": "ğ“¾", "W14": "ğ“¿", "W14A": "ğ“€", "W15": "ğ“", "W16": "ğ“‚", "W17": "ğ“ƒ", "W17A": "ğ“„", "W18": "ğ“…", "W18A": "ğ“†", "W19": "ğ“‡", "W20": "ğ“ˆ", "W21": "ğ“‰", "W22": "ğ“Š", "W23": "ğ“‹", "W24": "ğ“Œ", "W24A": "ğ“", "W25": "ğ“", "X1": "ğ“", "X2": "ğ“", "X3": "ğ“‘", "X4": "ğ“’", "X4A": "ğ““", "X4B": "ğ“”", "X5": "ğ“•", "X6": "ğ“–", "X6A": "ğ“—", "X7": "ğ“˜", "X8": "ğ“™", "X8A": "ğ“š", "Y1": "ğ“›", "Y1A": "ğ“œ", "Y2": "ğ“", "Y3": "ğ“", "Y4": "ğ“Ÿ", "Y5": "ğ“ ", "Y6": "ğ“¡", "Y7": "ğ“¢", "Y8": "ğ“£", "Z1": "ğ“¤", "Z2": "ğ“¥", "Z2A": "ğ“¦", "Z2B": "ğ“§", "Z2C": "ğ“¨", "Z2D": "ğ“©", "Z3": "ğ“ª", "Z3A": "ğ“«", "Z3B": "ğ“¬", "Z4": "ğ“­", "Z4A": "ğ“®", "Z5": "ğ“¯", "Z5A": "ğ“°", "Z6": "ğ“±", "Z7": "ğ“²", "Z8": "ğ“³", "Z9": "ğ“´", "Z10": "ğ“µ", "Z11": "ğ“¶", "Z12": "ğ“·", "Z13": "ğ“¸", "Z14": "ğ“¹", "Z15": "ğ“º", "Z15A": "ğ“»", "Z15B": "ğ“¼", "Z15C": "ğ“½", "Z15D": "ğ“¾", "Z15E": "ğ“¿", "Z15F": "ğ“€", "Z15G": "ğ“", "Z15H": "ğ“‚", "Z15I": "ğ“ƒ", "Z16": "ğ“„", "Z16A": "ğ“…", "Z16B": "ğ“†", "Z16C": "ğ“‡", "Z16D": "ğ“ˆ", "Z16E": "ğ“‰", "Z16F": "ğ“Š", "Z16G": "ğ“‹", "Z16H": "ğ“Œ", "Aa1": "ğ“", "Aa2": "ğ“", "Aa3": "ğ“", "Aa4": "ğ“", "Aa5": "ğ“‘", "Aa6": "ğ“’", "Aa7": "ğ““", "Aa7A": "ğ“”", "Aa7B": "ğ“•", "Aa8": "ğ“–", "Aa9": "ğ“—", "Aa10": "ğ“˜", "Aa11": "ğ“™", "Aa12": "ğ“š", "Aa13": "ğ“›", "Aa14": "ğ“œ", "Aa15": "ğ“", "Aa16": "ğ“", "Aa17": "ğ“Ÿ", "Aa18": "ğ“ ", "Aa19": "ğ“¡", "Aa20": "ğ“¢", "Aa21": "ğ“£", "Aa22": "ğ“¤", "Aa23": "ğ“¥", "Aa24": "ğ“¦", "Aa25": "ğ“§", "Aa26": "ğ“¨", "Aa27": "ğ“©", "Aa28": "ğ“ª", "Aa29": "ğ“«", "Aa30": "ğ“¬", "Aa31": "ğ“­", "Aa32": "ğ“®"}    
	gard2hex = { "A1": "13000", "A2": "13001", "A3": "13002", "A4": "13003", "A5": "13004", "A5A": "13005", "A6": "13006", "A6A": "13007", "A6B": "13008", "A7": "13009", "A8": "1300A", "A9": "1300B", "A10": "1300C", "A11": "1300D", "A12": "1300E", "A13": "1300F", "A14": "13010", "A14A": "13011", "A15": "13012", "A16": "13013", "A17": "13014", "A17A": "13015", "A18": "13016", "A19": "13017", "A20": "13018", "A21": "13019", "A22": "1301A", "A23": "1301B", "A24": "1301C", "A25": "1301D", "A26": "1301E", "A27": "1301F", "A28": "13020", "A29": "13021", "A30": "13022", "A31": "13023", "A32": "13024", "A32A": "13025", "A33": "13026", "A34": "13027", "A35": "13028", "A36": "13029", "A37": "1302A", "A38": "1302B", "A39": "1302C", "A40": "1302D", "A40A": "1302E", "A41": "1302F", "A42": "13030", "A42A": "13031", "A43": "13032", "A43A": "13033", "A44": "13034", "A45": "13035", "A45A": "13036", "A46": "13037", "A47": "13038", "A48": "13039", "A49": "1303A", "A50": "1303B", "A51": "1303C", "A52": "1303D", "A53": "1303E", "A54": "1303F", "A55": "13040", "A56": "13041", "A57": "13042", "A58": "13043", "A59": "13044", "A60": "13045", "A61": "13046", "A62": "13047", "A63": "13048", "A64": "13049", "A65": "1304A", "A66": "1304B", "A67": "1304C", "A68": "1304D", "A69": "1304E", "A70": "1304F", "B1": "13050", "B2": "13051", "B3": "13052", "B4": "13053", "B5": "13054", "B5A": "13055", "B6": "13056", "B7": "13057", "B8": "13058", "B9": "13059", "C1": "1305A", "C2": "1305B", "C2A": "1305C", "C2B": "1305D", "C2C": "1305E", "C3": "1305F", "C4": "13060", "C5": "13061", "C6": "13062", "C7": "13063", "C8": "13064", "C9": "13065", "C10": "13066", "C10A": "13067", "C11": "13068", "C12": "13069", "C13": "1306A", "C14": "1306B", "C15": "1306C", "C16": "1306D", "C17": "1306E", "C18": "1306F", "C19": "13070", "C20": "13071", "C21": "13072", "C22": "13073", "C23": "13074", "C24": "13075", "D1": "13076", "D2": "13077", "D3": "13078", "D4": "13079", "D5": "1307A", "D6": "1307B", "D7": "1307C", "D8": "1307D", "D8A": "1307E", "D9": "1307F", "D10": "13080", "D11": "13081", "D12": "13082", "D13": "13083", "D14": "13084", "D15": "13085", "D16": "13086", "D17": "13087", "D18": "13088", "D19": "13089", "D20": "1308A", "D21": "1308B", "D22": "1308C", "D23": "1308D", "D24": "1308E", "D25": "1308F", "D26": "13090", "D27": "13091", "D27A": "13092", "D28": "13093", "D29": "13094", "D30": "13095", "D31": "13096", "D31A": "13097", "D32": "13098", "D33": "13099", "D34": "1309A", "D34A": "1309B", "D35": "1309C", "D36": "1309D", "D37": "1309E", "D38": "1309F", "D39": "130A0", "D40": "130A1", "D41": "130A2", "D42": "130A3", "D43": "130A4", "D44": "130A5", "D45": "130A6", "D46": "130A7", "D46A": "130A8", "D47": "130A9", "D48": "130AA", "D48A": "130AB", "D49": "130AC", "D50": "130AD", "D50A": "130AE", "D50B": "130AF", "D50C": "130B0", "D50D": "130B1", "D50E": "130B2", "D50F": "130B3", "D50G": "130B4", "D50H": "130B5", "D50I": "130B6", "D51": "130B7", "D52": "130B8", "D52A": "130B9", "D53": "130BA", "D54": "130BB", "D54A": "130BC", "D55": "130BD", "D56": "130BE", "D57": "130BF", "D58": "130C0", "D59": "130C1", "D60": "130C2", "D61": "130C3", "D62": "130C4", "D63": "130C5", "D64": "130C6", "D65": "130C7", "D66": "130C8", "D67": "130C9", "D67A": "130CA", "D67B": "130CB", "D67C": "130CC", "D67D": "130CD", "D67E": "130CE", "D67F": "130CF", "D67G": "130D0", "D67H": "130D1", "E1": "130D2", "E2": "130D3", "E3": "130D4", "E4": "130D5", "E5": "130D6", "E6": "130D7", "E7": "130D8", "E8": "130D9", "E8A": "130DA", "E9": "130DB", "E9A": "130DC", "E10": "130DD", "E11": "130DE", "E12": "130DF", "E13": "130E0", "E14": "130E1", "E15": "130E2", "E16": "130E3", "E16A": "130E4", "E17": "130E5", "E17A": "130E6", "E18": "130E7", "E19": "130E8", "E20": "130E9", "E20A": "130EA", "E21": "130EB", "E22": "130EC", "E23": "130ED", "E24": "130EE", "E25": "130EF", "E26": "130F0", "E27": "130F1", "E28": "130F2", "E28A": "130F3", "E29": "130F4", "E30": "130F5", "E31": "130F6", "E32": "130F7", "E33": "130F8", "E34": "130F9", "E34A": "130FA", "E36": "130FB", "E37": "130FC", "E38": "130FD", "F1": "130FE", "F1A": "130FF", "F2": "13100", "F3": "13101", "F4": "13102", "F5": "13103", "F6": "13104", "F7": "13105", "F8": "13106", "F9": "13107", "F10": "13108", "F11": "13109", "F12": "1310A", "F13": "1310B", "F13A": "1310C", "F14": "1310D", "F15": "1310E", "F16": "1310F", "F17": "13110", "F18": "13111", "F19": "13112", "F20": "13113", "F21": "13114", "F21A": "13115", "F22": "13116", "F23": "13117", "F24": "13118", "F25": "13119", "F26": "1311A", "F27": "1311B", "F28": "1311C", "F29": "1311D", "F30": "1311E", "F31": "1311F", "F31A": "13120", "F32": "13121", "F33": "13122", "F34": "13123", "F35": "13124", "F36": "13125", "F37": "13126", "F37A": "13127", "F38": "13128", "F38A": "13129", "F39": "1312A", "F40": "1312B", "F41": "1312C", "F42": "1312D", "F43": "1312E", "F44": "1312F", "F45": "13130", "F45A": "13131", "F46": "13132", "F46A": "13133", "F47": "13134", "F47A": "13135", "F48": "13136", "F49": "13137", "F50": "13138", "F51": "13139", "F51A": "1313A", "F51B": "1313B", "F51C": "1313C", "F52": "1313D", "F53": "1313E", "G1": "1313F", "G2": "13140", "G3": "13141", "G4": "13142", "G5": "13143", "G6": "13144", "G6A": "13145", "G7": "13146", "G7A": "13147", "G7B": "13148", "G8": "13149", "G9": "1314A", "G10": "1314B", "G11": "1314C", "G11A": "1314D", "G12": "1314E", "G13": "1314F", "G14": "13150", "G15": "13151", "G16": "13152", "G17": "13153", "G18": "13154", "G19": "13155", "G20": "13156", "G20A": "13157", "G21": "13158", "G22": "13159", "G23": "1315A", "G24": "1315B", "G25": "1315C", "G26": "1315D", "G26A": "1315E", "G27": "1315F", "G28": "13160", "G29": "13161", "G30": "13162", "G31": "13163", "G32": "13164", "G33": "13165", "G34": "13166", "G35": "13167", "G36": "13168", "G36A": "13169", "G37": "1316A", "G37A": "1316B", "G38": "1316C", "G39": "1316D", "G40": "1316E", "G41": "1316F", "G42": "13170", "G43": "13171", "G43A": "13172", "G44": "13173", "G45": "13174", "G45A": "13175", "G46": "13176", "G47": "13177", "G48": "13178", "G49": "13179", "G50": "1317A", "G51": "1317B", "G52": "1317C", "G53": "1317D", "G54": "1317E", "H1": "1317F", "H2": "13180", "H3": "13181", "H4": "13182", "H5": "13183", "H6": "13184", "H6A": "13185", "H7": "13186", "H8": "13187", "I1": "13188", "I2": "13189", "I3": "1318A", "I4": "1318B", "I5": "1318C", "I5A": "1318D", "I6": "1318E", "I7": "1318F", "I8": "13190", "I9": "13191", "I9A": "13192", "I10": "13193", "I10A": "13194", "I11": "13195", "I11A": "13196", "I12": "13197", "I13": "13198", "I14": "13199", "I15": "1319A", "K1": "1319B", "K2": "1319C", "K3": "1319D", "K4": "1319E", "K5": "1319F", "K6": "131A0", "K7": "131A1", "K8": "131A2", "L1": "131A3", "L2": "131A4", "L2A": "131A5", "L3": "131A6", "L4": "131A7", "L5": "131A8", "L6": "131A9", "L6A": "131AA", "L7": "131AB", "L8": "131AC", "M1": "131AD", "M1A": "131AE", "M1B": "131AF", "M2": "131B0", "M3": "131B1", "M3A": "131B2", "M4": "131B3", "M5": "131B4", "M6": "131B5", "M7": "131B6", "M8": "131B7", "M9": "131B8", "M10": "131B9", "M10A": "131BA", "M11": "131BB", "M12": "131BC", "M12A": "131BD", "M12B": "131BE", "M12C": "131BF", "M12D": "131C0", "M12E": "131C1", "M12F": "131C2", "M12G": "131C3", "M12H": "131C4", "M13": "131C5", "M14": "131C6", "M15": "131C7", "M15A": "131C8", "M16": "131C9", "M16A": "131CA", "M17": "131CB", "M17A": "131CC", "M18": "131CD", "M19": "131CE", "M20": "131CF", "M21": "131D0", "M22": "131D1", "M22A": "131D2", "M23": "131D3", "M24": "131D4", "M24A": "131D5", "M25": "131D6", "M26": "131D7", "M27": "131D8", "M28": "131D9", "M28A": "131DA", "M29": "131DB", "M30": "131DC", "M31": "131DD", "M31A": "131DE", "M32": "131DF", "M33": "131E0", "M33A": "131E1", "M33B": "131E2", "M34": "131E3", "M35": "131E4", "M36": "131E5", "M37": "131E6", "M38": "131E7", "M39": "131E8", "M40": "131E9", "M40A": "131EA", "M41": "131EB", "M42": "131EC", "M43": "131ED", "M44": "131EE", "N1": "131EF", "N2": "131F0", "N3": "131F1", "N4": "131F2", "N5": "131F3", "N6": "131F4", "N7": "131F5", "N8": "131F6", "N9": "131F7", "N10": "131F8", "N11": "131F9", "N12": "131FA", "N13": "131FB", "N14": "131FC", "N15": "131FD", "N16": "131FE", "N17": "131FF", "N18": "13200", "N18A": "13201", "N18B": "13202", "N19": "13203", "N20": "13204", "N21": "13205", "N22": "13206", "N23": "13207", "N24": "13208", "N25": "13209", "N25A": "1320A", "N26": "1320B", "N27": "1320C", "N28": "1320D", "N29": "1320E", "N30": "1320F", "N31": "13210", "N32": "13211", "N33": "13212", "N33A": "13213", "N34": "13214", "N34A": "13215", "N35": "13216", "N35A": "13217", "N36": "13218", "N37": "13219", "N37A": "1321A", "N38": "1321B", "N39": "1321C", "N40": "1321D", "N41": "1321E", "N42": "1321F", "NL5a": "13225", "NL18": "13233", "O1": "13250", "O2": "13252", "O3": "13253", "O4": "13254", "O5": "13255", "O5A": "13256", "O6": "13257", "O6A": "13258", "O6B": "13259", "O6C": "1325A", "O6D": "1325B", "O6E": "1325C", "O6F": "1325D", "O7": "1325E", "O8": "1325F", "O9": "13260", "O10": "13261", "O10A": "13262", "O10B": "13263", "O10C": "13264", "O11": "13265", "O12": "13266", "O13": "13267", "O14": "13268", "O15": "13269", "O16": "1326A", "O17": "1326B", "O18": "1326C", "O19": "1326D", "O19A": "1326E", "O20": "1326F", "O20A": "13270", "O21": "13271", "O22": "13272", "O23": "13273", "O24": "13274", "O24A": "13275", "O25": "13276", "O25A": "13277", "O26": "13278", "O27": "13279", "O28": "1327A", "O29": "1327B", "O29A": "1327C", "O30": "1327D", "O30A": "1327E", "O31": "1327F", "O32": "13280", "O33": "13281", "O33A": "13282", "O34": "13283", "O35": "13284", "O36": "13285", "O36A": "13286", "O36B": "13287", "O36C": "13288", "O36D": "13289", "O37": "1328A", "O38": "1328B", "O39": "1328C", "O40": "1328D", "O41": "1328E", "O42": "1328F", "O43": "13290", "O44": "13291", "O45": "13292", "O46": "13293", "O47": "13294", "O48": "13295", "O49": "13296", "O50": "13297", "O50A": "13298", "O50B": "13299", "O51": "1329A", "P1": "1329B", "P1A": "1329C", "P2": "1329D", "P3": "1329E", "P3A": "1329F", "P4": "132A0", "P5": "132A1", "P6": "132A2", "P7": "132A3", "P8": "132A4", "P9": "132A5", "P10": "132A6", "P11": "132A7", "Q1": "132A8", "Q2": "132A9", "Q3": "132AA", "Q4": "132AB", "Q5": "132AC", "Q6": "132AD", "Q7": "132AE", "R1": "132AF", "R2": "132B0", "R2A": "132B1", "R3": "132B2", "R3A": "132B3", "R3B": "132B4", "R4": "132B5", "R5": "132B6", "R6": "132B7", "R7": "132B8", "R8": "132B9", "R9": "132BA", "R10": "132BB", "R10A": "132BC", "R11": "132BD", "R12": "132BE", "R13": "132BF", "R14": "132C0", "R15": "132C1", "R16": "132C2", "R16A": "132C3", "R17": "132C4", "R18": "132C5", "R19": "132C6", "R20": "132C7", "R21": "132C8", "R22": "132C9", "R23": "132CA", "R24": "132CB", "R25": "132CC", "R26": "132CD", "R27": "132CE", "R28": "132CF", "R29": "132D0", "S1": "132D1", "S2": "132D2", "S2A": "132D3", "S3": "132D4", "S4": "132D5", "S5": "132D6", "S6": "132D7", "S6A": "132D8", "S7": "132D9", "S8": "132DA", "S9": "132DB", "S10": "132DC", "S11": "132DD", "S12": "132DE", "S13": "132DF", "S14": "132E0", "S14A": "132E1", "S14B": "132E2", "S15": "132E3", "S16": "132E4", "S17": "132E5", "S17A": "132E6", "S18": "132E7", "S19": "132E8", "S20": "132E9", "S21": "132EA", "S22": "132EB", "S23": "132EC", "S24": "132ED", "S25": "132EE", "S26": "132EF", "S26A": "132F0", "S26B": "132F1", "S27": "132F2", "S28": "132F3", "S29": "132F4", "S30": "132F5", "S31": "132F6", "S32": "132F7", "S33": "132F8", "S34": "132F9", "S35": "132FA", "S35A": "132FB", "S36": "132FC", "S37": "132FD", "S38": "132FE", "S39": "132FF", "S40": "13300", "S41": "13301", "S42": "13302", "S43": "13303", "S44": "13304", "S45": "13305", "S46": "13306", "T1": "13307", "T2": "13308", "T3": "13309", "T3A": "1330A", "T4": "1330B", "T5": "1330C", "T6": "1330D", "T7": "1330E", "T7A": "1330F", "T8": "13310", "T8A": "13311", "T9": "13312", "T9A": "13313", "T10": "13314", "T11": "13315", "T11A": "13316", "T12": "13317", "T13": "13318", "T14": "13319", "T15": "1331A", "T16": "1331B", "T16A": "1331C", "T17": "1331D", "T18": "1331E", "T19": "1331F", "T20": "13320", "T21": "13321", "T22": "13322", "T23": "13323", "T24": "13324", "T25": "13325", "T26": "13326", "T27": "13327", "T28": "13328", "T29": "13329", "T30": "1332A", "T31": "1332B", "T32": "1332C", "T32A": "1332D", "T33": "1332E", "T33A": "1332F", "T34": "13330", "T35": "13331", "T36": "13332", "U1": "13333", "U2": "13334", "U3": "13335", "U4": "13336", "U5": "13337", "U6": "13338", "U6A": "13339", "U6B": "1333A", "U7": "1333B", "U8": "1333C", "U9": "1333D", "U10": "1333E", "U11": "1333F", "U12": "13340", "U13": "13341", "U14": "13342", "U15": "13343", "U16": "13344", "U17": "13345", "U18": "13346", "U19": "13347", "U20": "13348", "U21": "13349", "U22": "1334A", "U23": "1334B", "U23A": "1334C", "U24": "1334D", "U25": "1334E", "U26": "1334F", "U27": "13350", "U28": "13351", "U29": "13352", "U29A": "13353", "U30": "13354", "U31": "13355", "U32": "13356", "U32A": "13357", "U33": "13358", "U34": "13359", "U35": "1335A", "U36": "1335B", "U37": "1335C", "U38": "1335D", "U39": "1335E", "U40": "1335F", "U41": "13360", "U42": "13361", "V1": "13362", "V1A": "13363", "V1B": "13364", "V1C": "13365", "V1D": "13366", "V1E": "13367", "V1F": "13368", "V1G": "13369", "V1H": "1336A", "V1I": "1336B", "V2": "1336C", "V2A": "1336D", "V3": "1336E", "V4": "1336F", "V5": "13370", "V6": "13371", "V7": "13372", "V7A": "13373", "V7B": "13374", "V8": "13375", "V9": "13376", "V10": "13377", "V11": "13378", "V11A": "13379", "V11B": "1337A", "V11C": "1337B", "V12": "1337C", "V12A": "1337D", "V12B": "1337E", "V13": "1337F", "V14": "13380", "V15": "13381", "V16": "13382", "V17": "13383", "V18": "13384", "V19": "13385", "V20": "13386", "V20A": "13387", "V20B": "13388", "V20C": "13389", "V20D": "1338A", "V20E": "1338B", "V20F": "1338C", "V20G": "1338D", "V20H": "1338E", "V20I": "1338F", "V20J": "13390", "V20K": "13391", "V20L": "13392", "V21": "13393", "V22": "13394", "V23": "13395", "V23A": "13396", "V24": "13397", "V25": "13398", "V26": "13399", "V27": "1339A", "V28": "1339B", "V28A": "1339C", "V29": "1339D", "V29A": "1339E", "V30": "1339F", "V30A": "133A0", "V31": "133A1", "V31A": "133A2", "V32": "133A3", "V33": "133A4", "V33A": "133A5", "V34": "133A6", "V35": "133A7", "V36": "133A8", "V37": "133A9", "V37A": "133AA", "V38": "133AB", "V39": "133AC", "V40": "133AD", "V40A": "133AE", "W1": "133AF", "W2": "133B0", "W3": "133B1", "W3A": "133B2", "W4": "133B3", "W5": "133B4", "W6": "133B5", "W7": "133B6", "W8": "133B7", "W9": "133B8", "W9A": "133B9", "W10": "133BA", "W10A": "133BB", "W11": "133BC", "W12": "133BD", "W13": "133BE", "W14": "133BF", "W14A": "133C0", "W15": "133C1", "W16": "133C2", "W17": "133C3", "W17A": "133C4", "W18": "133C5", "W18A": "133C6", "W19": "133C7", "W20": "133C8", "W21": "133C9", "W22": "133CA", "W23": "133CB", "W24": "133CC", "W24A": "133CD", "W25": "133CE", "X1": "133CF", "X2": "133D0", "X3": "133D1", "X4": "133D2", "X4A": "133D3", "X4B": "133D4", "X5": "133D5", "X6": "133D6", "X6A": "133D7", "X7": "133D8", "X8": "133D9", "X8A": "133DA", "Y1": "133DB", "Y1A": "133DC", "Y2": "133DD", "Y3": "133DE", "Y4": "133DF", "Y5": "133E0", "Y6": "133E1", "Y7": "133E2", "Y8": "133E3", "Z1": "133E4", "Z2": "133E5", "Z2A": "133E6", "Z2B": "133E7", "Z2C": "133E8", "Z2D": "133E9", "Z3": "133EA", "Z3A": "133EB", "Z3B": "133EC", "Z4": "133ED", "Z4A": "133EE", "Z5": "133EF", "Z5A": "133F0", "Z6": "133F1", "Z7": "133F2", "Z8": "133F3", "Z9": "133F4", "Z10": "133F5", "Z11": "133F6", "Z12": "133F7", "Z13": "133F8", "Z14": "133F9", "Z15": "133FA", "Z15A": "133FB", "Z15B": "133FC", "Z15C": "133FD", "Z15D": "133FE", "Z15E": "133FF", "Z15F": "13400", "Z15G": "13401", "Z15H": "13402", "Z15I": "13403", "Z16": "13404", "Z16A": "13405", "Z16B": "13406", "Z16C": "13407", "Z16D": "13408", "Z16E": "13409", "Z16F": "1340A", "Z16G": "1340B", "Z16H": "1340C", "Aa1": "1340D", "Aa2": "1340E", "Aa3": "1340F", "Aa4": "13410", "Aa5": "13411", "Aa6": "13412", "Aa7": "13413", "Aa7A": "13414", "Aa7B": "13415", "Aa8": "13416", "Aa9": "13417", "Aa10": "13418", "Aa11": "13419", "Aa12": "1341A", "Aa13": "1341B", "Aa14": "1341C", "Aa15": "1341D", "Aa16": "1341E", "Aa17": "1341F", "Aa18": "13420", "Aa19": "13421", "Aa20": "13422", "Aa21": "13423", "Aa22": "13424", "Aa23": "13425", "Aa24": "13426", "Aa25": "13427", "Aa26": "13428", "Aa27": "13429", "Aa28": "1342A", "Aa29": "1342B", "Aa30": "1342C", "Aa31": "1342D", "Aa32": "1342E" };    
    
    function display(options) {
 	    document.body.appendChild(svgsrc);

    	if ( !options ) { options = {}; }
    	if ( options['svgurl'] ) { 
    		svgbase = options['svgurl']; 
    	};
    	if ( options['lineheight'] ) { 
    		lineheight = parseFloat(options['lineheight']); 
    		spacing = lineheight * 0.12;
    	};
    	if ( options['class'] ) { 
    		mdcclass = options['class'];
		};
    	if ( options['attr'] ) { 
    		mdcatt = options['attr'];
		};
    	if ( "unicode" in options ) { 
    		if ( debug ) { console.log('Disabled Unicode'); };
    		useunicode = options['unicode'];
		};
    	if ( "css" in options ) { 
    		 cssurl = options['css'];
    		 csslink = "<link href=\""+cssurl+"\" type=\"text/css\" rel=\"stylesheet\" xmlns=\"http://www.w3.org/1999/xhtml\"/>";
			 gsvgtxt = "<svg xmlns=\"http://www.w3.org/2000/svg\" maxw=\""+(lineheight/2)+"\">"+csslink+"</svg>";
			 gsvgxml = addsvgxml(gsvgtxt, 'stylesheet');
    		if ( debug ) { console.log('Using CSS file from: ' + cssurl); };
		};
    	if ( options['debug'] ) { 
    		debug = true;
		};
		
		// Create an SVG for each token-glyph
		elms = document.getElementsByClassName(mdcclass);
		for (let i = 0; i < elms.length; i++) {
			elm = elms[i];
			makeglyph(elm, mdcatt);
		}
		// Create an SVG for gardiner number via Ajax
		startAjaxCalls(Object.keys(toloads))
		  .then(function(results) {
			positionsvgs();
		  })
		  .catch(function(error) {
			console.error('Error:', error); // This should not happen
		  });
	};

	function makeglyph(elm, att) {
		gard = elm.getAttribute(att);
		newsvg = makesvg(gard);
		newsvg.setAttribute('id', 'glyph-'+(gnrcnt+1));
		gnrcnt++;
		elm.appendChild(newsvg);
	};

	function positionsvgs() {
		// Once loaded, put the elements of the glyphs in their proper position
		elms = document.getElementsByClassName(mdcclass);
		for (let i = 0; i < elms.length; i++) {
			elm = elms[i];
			svg = elm.getElementsByTagName('svg')[0];
			poschilds(svg);
		};	
		// Fully hide the SVG placeholder	
		if ( debug ) { svgsrc.style.opacity = 1; } else { svgsrc.style.display = "none"; };
	};

	function poschilds(svg) {
		// Position the children within a group
		var mdc = svg.getAttribute('mdc');
		var cdir = svg.getAttribute('dir');
		// cdir = "hor";
		var children = svg.childNodes;
		var lines = children.length;
		var trx = 0;
		var trv = 0; // try is taken
		var clh = lineheight; // carat height
		if ( cdir == "vrt" )  { 
			clh = lineheight/lines; 
		};
		var maxw = spacing; // try is taken
		for ( var i=0; i<children.length; i++ ) {
			var child = children[i];
			// Set the carat size to lineheight as a default
			var chh = clh;
			var chw = clh/lines;
			var ratio = 1;
			var moretrans = "";
			if ( child.nodeName == 'g' ) {
				// A group (horizontal/vertical)
				ratio = (chh/lineheight)*0.95; // divide by number of rows with spacing
				poschilds(child);
				chw = parseFloat(child.getAttribute('chw').replace('px', '')) * ratio;
				chh = parseFloat(child.getAttribute('chh').replace('px', '')) * ratio;
			} else {
				// A sign
				gard = child.getAttribute('href').substr(1);
				gardnr = child.getAttribute('mdc');
				gardorg = document.getElementById(gard);
				if ( gardorg ) {
					gardnr = gardorg.getAttribute('mdc');
					bbox = gardorg.getBoundingClientRect();
				} else {
					bbox = child.getBoundingClientRect();
				};
				ratio = (chh/bbox.height);
				maxcw = clh;
				if ( gardorg && gardorg.getAttribute('maxw')  ) { maxcw = gardorg.getAttribute('maxw'); };
				if( bbox.width*ratio > maxcw ) {
					ratio = maxcw/bbox.width;
				};
				if ( ratio == 0 || !isFinite(ratio) ) { 
					ratio = 1;
				};
				chh = bbox.height*ratio;
				chw =  bbox.width*ratio;
			}
			if ( cdir == 'vrt' ) {
				transform = 'translate('+trx+', '+trv+') scale('+(ratio)+')';
				trv = trv + clh + spacing/lines;
				if ( chw > maxw ) { maxw = chw; };
			} else {
				transform = 'translate('+trx+', '+trv+') scale('+(ratio)+')' + moretrans;
				trx = trx + chw + spacing;
			};
			child.setAttribute('transform', transform);
			child.setAttribute('chw', chw + "px");
			child.setAttribute('chh', chh + "px");
		};
		if ( cdir == 'vrt' ) {
			trx = trx + maxw + spacing;
		};
		svg.setAttribute("chw", ( trx - spacing ) + "px");
		svg.setAttribute("chh", lineheight + 'px');
		if ( svg.nodeName == 'svg') { 
			svg.setAttribute("width", ( trx ) + "px");
			svg.setAttribute("height", lineheight + 'px');
		};
	};

	function mdcparse(mdc) {
		if ( mdc.includes('-') ) {
			var parts = mdc.split('-');
			var parse = [];
			for ( var j=0; j<parts.length; j++ ) {
				parse.push(mdcparse(parts[j]));
			};
			return {'type': 'hor', 'mdc': mdc, 'elms': parse};
		} else if ( mdc.includes(':') ) {
			var parts = mdc.split(':');
			var parse = [];
			for ( var j=0; j<parts.length; j++ ) {
				parse.push(mdcparse(parts[j]));
			};
			return {'type': 'vrt', 'mdc': mdc, 'elms': parse};
		} else if ( mdc.includes('*') ) {
			var parts = mdc.split('*');
			var parse = [];
			for ( var j=0; j<parts.length; j++ ) {
				parse.push(mdcparse(parts[j]));
			};
			return {'type': 'hor', 'mdc': mdc, 'elms': parse};
		} else {
			var basesign = mdc; var signtrans = "";
			var sign = {'type': 'sign', 'mdc': mdc, 'sign': mdc, 'basesign': basesign};
			if ( tmp = mdc.match(/(.*)([\\#].*)/) ) {
				basesign = tmp[1]; signtrans = tmp[2];
				sign['basesign'] = basesign;
			};
			if ( phon2gard[basesign] ) {
				sign['sign'] = phon2gard[basesign] + signtrans;
				sign['basesign'] = phon2gard[basesign];
			};
			if ( signtrans ) {
				sign['mdctrans'] = signtrans;
			};
			if ( mdc.substr(-1) == "\\") {
				sign['mdc'] = mdc.slice(0,-1);
				sign['transform'] = 'mirror';
			};
			return sign;
		};
		return {};
	};

	function makesvg(mdc) {
		parse = mdcparse(mdc);
		newsvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
		newsvg.appendChild(makegrp(parse));
		newsvg.setAttribute('mdc', mdc);
		return newsvg;
	};

	function makegrp(parse) {
		if ( parse['type'] == 'sign' ) {
			var gard = parse['sign'];
			var basegard = gard;
			if ( parse['basesign'] ) { basegard = parse['basesign']; };
			if ( gard2hex[basegard] && useunicode ) {
				if ( !gardlist[basegard] ) {
					unicode = "&#x"+gard2hex[basegard]+";";
					gsvgtxt = "<svg xmlns=\"http://www.w3.org/2000/svg\" maxw=\""+(lineheight/2)+"\"><text y=\""+(textheight)+"px\" class=\"sign\" font-size=\""+textheight+"px\">"+unicode+"</text></svg>";
					gardlist[basegard] = addsvgxml(gsvgtxt, "gnr-"+basegard);
				};
				if ( basegard != gard && !gardlist[gard] ) {
					var tract = "";
					if ( parse['mdctrans'] == "\\" ) {
						bbox = gardlist[basegard].getBoundingClientRect();
				 		tract = "scale(-1 1) translate(-"+bbox.width+" 0)"; 
					} else if ( parse['mdctrans']  == "\\r2") {
// 						if ( gardnr.substr(-1) == "1" ) { count = 90; };
						count = 180;
						bbox = gardlist[basegard].getBoundingClientRect();
					 	tract = "rotate("+count+" "+(bbox.width/2)+" "+(bbox.height/2)+")"; 
					};
					gsvgtxt = "<svg xmlns=\"http://www.w3.org/2000/svg\" maxw=\""+(lineheight/2)+"\"><use  transform=\""+tract+"\" href=\"#gnr-"+basegard+"\"/></svg>";
					gardlist[gard] = addsvgxml(gsvgtxt, "gnr-"+gard);
				};
			} else { 
				// defer to load SVG via Ajax
				toloads[gard] = 1; 
			}	
			var sign = document.createElementNS('http://www.w3.org/2000/svg', 'use');
			sign.setAttribute('href', "#gnr-"+gard);
			return sign;
		} else {
			var group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
			group.setAttribute('dir', parse['type']);
			group.setAttribute('mdc', parse['mdc']);
			for ( var j=0; j<parse['elms'].length; j++ ) {
				part = parse['elms'][j];
				partsvg = makegrp(part);
				group.appendChild(partsvg);
			};
			return group;
		};
		return -1;
	};

	function makeAjaxCall(gardnr) {
	  return new Promise(function(resolve, reject) {
		var xhr = new XMLHttpRequest();
		var maingard = gardnr;
		var transform = "";
		var phonnr = "";
		if ( gardnr.substr(-1) == "\\" ) {
			maingard = gardnr.slice(0,-1);
			transform = "mirror";
		} else if ( gardnr.substr(-3,2) == "\\r") {
			maingard = gardnr.slice(0,-3);
			transform = "rotate";
			if ( gardnr.substr(-1) == "1" ) { count = 90; };
			if ( gardnr.substr(-1) == "2" ) { count = 180; };
			if ( gardnr.substr(-1) == "3" ) { count = 270; };
		};
		surl = svgbase + maingard + '.svg';
		xhr.open('GET', surl, true);

		xhr.onload = function() {
		  if (xhr.status >= 200 && xhr.status < 300) {
			gsvgxml = this.responseXML.documentElement;
			// gsvgxml.setAttribute('xmlns', "http://www.w3.org/2000/svg"); 
			if ( gsvgxml.getAttribute('xmlns') != "http://www.w3.org/2000/svg") {
				 gsvgtxt = this.responseText.replace('<svg ', '<svg xmlns="http://www.w3.org/2000/svg" ');
   				 parser = new DOMParser();
				 gsvgxml = parser.parseFromString(gsvgtxt, "text/xml").firstChild; //important to use "text/xml"
			};
			gsvgxml.setAttribute('id', 'gnr-'+maingard);
 			gsvgxml.setAttribute('mdc', gardnr);
			gardlist[gardnr] = gsvgxml;
			svgsrc.appendChild(gsvgxml);
			bbox = gsvgxml.getBoundingClientRect();
		    if ( !svgsrc.getAttribute('width') && bbox.width > 0 ) {
				gsvgxml.setAttribute("width", bbox.width + "px");
			};
			if ( gardnr != maingard ) {
				 // Generate a copy of a base glyph with a translation on it (rotate, mirror)
				 var tract = "";
				 if ( transform == "mirror" ) { 
				 	tract = "scale(-1 1) translate(-"+bbox.width+" 0)"; 
				 };
				 if ( transform == "rotate" ) { 
				 	tract = "rotate("+count+" "+(bbox.width/2)+" "+(bbox.height/2)+")"; 
				 };
				 tsvgtxt = "<svg xmlns=\"http://www.w3.org/2000/svg\"><use transform=\""+tract+"\"/></svg>";
				 parser = new DOMParser();
				 tsvgxml = parser.parseFromString(tsvgtxt, "text/xml").firstChild; //important to use "text/xml"
	  			 tsvgxml.firstChild.setAttribute('href', "#gnr-"+maingard);
	  			 tsvgxml.setAttribute('width', bbox.width);
	  			 tsvgxml.setAttribute('height', bbox.height);
	  			 svgsrc.appendChild(tsvgxml);
				 tsvgxml.setAttribute('id', 'gnr-'+gardnr);
			};
			resolve(xhr.responseText);
		  } else {
			 makeunknownsvg(gardnr);
 			 resolve(xhr.responseText); // We do not need to know which ones went wrong
			 // reject(xhr.statusText);
		  }
		};

		xhr.onerror = function() {
			 makeunknownsvg(gardnr);
		     resolve(xhr.responseText); // We do not need to know which ones went wrong
			// reject(xhr.statusText); 
		};

		xhr.send();
	  });
	};
	
	function showgly(params) {
		divid = "glydiv";
		var gly = "";
		if ( params['div'] ) { divid = params['div']; };
		if ( params['gly'] ) { gly = params['gly']; };
		
		glydiv = document.getElementById('glydiv');
		if ( !glydiv ) {
			glydiv = document.createElement('div');
			glydiv.setAttribute("id", "glydiv");
	 	    document.body.appendChild(glydiv);
		};
		if ( !gly || gly == "" ) { gly = glydiv.innerHTML.replace("<br>", "\n"); };
		
		glyhtml = "";
		glylines = gly.split("\n") ;
		for ( var i=0; i<glylines.length; i++ ) {
			glyline = glylines[i];
			glyhtml += "\n" + gly2html(glyline);
		};
			
		console.log(glyhtml);
		glydiv.innerHTML = glyhtml;
		
		display(params);
	};
	
	styles = { "b": "font-weight: bold" }
	function gly2html(gly) {
		if ( !gly || gly == "" ) { return ""; };
		
		if ( gly.substr(0,2) == "++" ) { return "<!-- " + gly + " -->"; }
		if ( tmp = gly.match(/^(.*)\+([tlbigc])([^+]+)\+s(.*)$/) ) { 
			var front = tmp[1];
			var type = tmp[2];
			var text = tmp[3];
			var back = tmp[4];
			return gly2html(front) + "<span style='"+styles[type]+"'>" + text + "</span>" + gly2html(back); 
		};
		if ( tmp = gly.match(/^(.*)\$r([^\$]+)\$b(.*)$/) ) { 
			var front = tmp[1];
			var text = tmp[2];
			var back = tmp[3];
			return gly2html(front) + "<span style='color: red'>" + text + "</span>" + gly2html(back); 
		};
		if ( tmp = gly.match(/^(.*)#b([^\$]+)#e(.*)$/) ) { 
			var front = tmp[1];
			var shades = tmp[2];
			var back = tmp[3];
			return gly2html(front) + "<span class='shaded'>" + gly2html(shades) + "</span>" + gly2html(back); 
		};
		if ( tmp = gly.match(/^(.*)\[\[([^\$]+)\]\](.*)$/) ) { 
			var front = tmp[1];
			var shades = tmp[2];
			var back = tmp[3];
			return gly2html(front) + "<span class='deleted'>" + gly2html(shades) + "</span>" + gly2html(back); 
		};
		if ( tmp = gly.match(/^(.*)\['([^\$]+)'\](.*)$/) ) { 
			var front = tmp[1];
			var shades = tmp[2];
			var back = tmp[3];
			return gly2html(front) + "<span class='added'>" + gly2html(shades) + "</span>" + gly2html(back); 
		};
		if ( tmp = gly.match(/^(.*)\["([^\$]+)"\](.*)$/) ) { 
			var front = tmp[1];
			var shades = tmp[2];
			var back = tmp[3];
			return gly2html(front) + "<span class='supplied'>" + gly2html(shades) + "</span>" + gly2html(back); 
		};
		
		// Everything that is left is a sign
		var signs = gly.split("-");
		var glyhtml = "";
		for ( var i=0; i<signs.length; i++ ) {
			sign = signs[i];
			if ( sign == "!" ) {
				signhtml = "<br>";
			} else if ( sign == "!!" ) {
				signhtml = "<hr>";
			} else if ( sign == "." ) {
				signhtml = " &nbsp; ";
			} else if ( sign == ".." ) {
				signhtml = " &nbsp; &nbsp; ";
			} else if ( tmp = sign.match(/\|(\d+)/) ) {
				signhtml = "<span class='linenumber'>"+tmp[1]+"</span>";
			} else {
				signhtml = "<span class='token-glyphs' title=\""+sign+"\"></span>";
			};
			glyhtml += signhtml;
		};
		
		return glyhtml;
	};
	
	function makeunknownsvg(gardnr) {
		 gsvgtxt = "<svg xmlns=\"http://www.w3.org/2000/svg\" maxw=\""+(lineheight/2)+"\"><text class=\"unknown\" y=\""+(textheight)+"px\" font-size=\""+textheight+"px\">"+gardnr+"</text></svg>";
		 gsvgxml = addsvgxml(gsvgtxt, 'gnr-'+gardnr);
		 gsvgxml.setAttribute('mdc', gardnr);
		 gardlist[gardnr] = gsvgxml;
		 
		 return gsvgxml;
	};
	
	function addsvgxml (xmltxt, id) {
		 tmp = document.getElementById(id);
		 if ( tmp ) { return tmp; };
		 parser = new DOMParser();
		 gsvgxml = parser.parseFromString(xmltxt, "text/xml").firstChild; //important to use "text/xml"
		 gsvgxml.setAttribute('id', id);
		 gsvgxml.setAttribute('title', id);
		 svgsrc.appendChild(gsvgxml);
		 bbox = gsvgxml.firstChild.getBoundingClientRect();
		 gsvgxml.setAttribute("width", bbox.width + "px");
		 gsvgxml.setAttribute("height", bbox.height + 'px');
		 if ( debug ) { console.log(gsvgxml); };
		 
		 return gsvgxml;
	};

	function startAjaxCalls(gardlist) {
	  var promises = [];

	  // Create an array of promises for each Ajax call
	  gardlist.forEach(function(gard) {
	  	if ( gardlist[gard] || pushed[gard] ) { console.log('already loaded ' + gard); return; }
		pushed[gard] = 1;
		promises.push(makeAjaxCall(gard));
	  });

	  // Use Promise.all to wait for all promises to resolve
	  return Promise.all(promises);
	}
	  
    return { 
		draw: function(params) { display(params); },
		parse: function(params) { showgly(params); },
    };

}());
